<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Table</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <!-- HTML -->
  <div class="scrollable_table">
    <table >
        <thead>
          <tr >
            <th>First Name</th>
            <th>Last Name</th>
            <th>Mobile No</th>
            <th>Email</th>
            <th>Address</th>
            <th>Login ID</th>
            <th>Password</th>
          </tr>
          
</thead>
        <tbody id="usersTableBody">
 </tbody>
      </table>
      </div>
      <button id="addNewUserBtn">Add New User</button>



  <!-- CSS -->
  <style>
* {
    padding: 0;
    margin: 0;
    box-sizing: border-box;
  }
  
  body,
  html {
    height: 100%;
    display: flex;
    flex-direction: column;
    margin: auto;
    background-color: #fff;
    overflow: hidden;
    padding: 20px 0;
  }




  
  #tableContainer {
    /* width: 80%; */
    max-width: max-content;
    margin-top: 50px;
    padding: 20px;
    background-color: #022b32;
    border: 2px solid #37484d;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(71, 71, 169, 0.7);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
  }
  
  table,
  th,
  td {
    border: 1px solid rgba(210, 214, 140, 0.9);
  }
  
  th,
  td {
    padding: 10px;
    text-align: left;
    background-color: #fff;
    color: #022b32;
    font-size: 15px;
  }

  th
  {
    position: sticky;
    top:0;
  }

  .scrollable_table
  {
    height: auto;
    overflow-y: auto;

  }

  td:hover
  {
    background-color: rgb(104, 103, 109);
    color: #fff;
  }

  tr
  {
    font-size: 15px;
    background-color: #fff;
  }

  tr:hover
  {
    background-color: rgb(147, 146, 150);
    color: #fff;

  }
  
  
  th {
    background-color: black;
    color: white;
  }
  
  #addNewUserBtn {
    margin: auto;
    width: 150px;
    padding: 10px;
    background-color: black;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
    box-shadow: 0 0 5px rgba(70, 68, 68, 0.5);
    margin-top: 20px;
  }
  
  #addNewUserBtn:hover {
    background-color: #3f3e44;
  }
</style>

    <!-- Script -->

<script>
    $(document).ready(function () {
      $.ajax({
        type: "GET",
        url: "http://localhost:4000/api/users",
        success: function (response) {
          const usersTableBody = $("#usersTableBody");
          response.forEach((user) => {
            const userRow = `
                          <tr>
                              <td>${user.firstName}</td>
                              <td>${user.lastName}</td>
                              <td>${user.mobileNo}</td>
                              <td>${user.emailId}</td>
                              <td>${user.address.street}, ${user.address.city}, ${user.address.state}, ${user.address.country}</td>
                              <td>${user.loginId}</td>
                              <td>${user.password}</td>
                          </tr>
                      `;
            usersTableBody.append(userRow);
          });
        },
        error: function (error) {
          alert("Error fetching users");
          console.log(error);
        },
      });
      $("#addNewUserBtn").on("click", function () {
        window.location.href = "index.html";
      });
    });
  </script>

</body>
</html>